---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { SITE, HOME, SOCIALS } from "@/consts";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import { ButtonGrid } from "@components/ButtonGrid";
import { AnimatedHeader } from "@components/AnimatedHeader";

const blog = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE);

const projects: CollectionEntry<"projects">[] = (
  await getCollection("projects")
)
  .filter((project) => !project.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_PROJECTS_ON_HOMEPAGE);
---

<Layout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <aside data-pagefind-ignore>
      <AnimatedHeader client:load />
      <div class="space-y-16">
        <section>
          <article class="prose dark:prose-invert space-y-8">
            <p>
              Learning isn't just about transferring information — it's about transformation. I design learning experiences that challenge assumptions, deepen understanding, and ultimately drive meaningful behavior change. My approach is rooted in the belief that strategic learning design is one of the most powerful levers an organization has to shape culture, accelerate performance, and future-proof its talent. I use tools like:
            </p>

            <ButtonGrid client:load />

            <p>
              I blend systems thinking with creative design, turning ambiguity into structure and complexity into clarity. Whether architecting enterprise training ecosystems or crafting modular content for global teams, I design with purpose and precision — always asking: What will the learner actually do with this? And what will it change for them and the organization?
            </p>

            <ButtonGrid client:load />

            <p>
              From emerging technologies to evidence-based instructional methods, I build experiences that don’t just inform — they activate. That means integrating learning analytics, embedding adaptive pathways, and designing feedback-rich environments where growth is measurable and momentum is built-in.
            </p>

            <p>
              This portfolio is a window into how I think and create — not just courses, but capability.
            </p>
          </article>
        </section>

        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="font-semibold text-black dark:text-white">
              Recent projects
            </h2>
            <Link href="/projects"> See all projects </Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              projects.map((project) => (
                <li>
                  <ArrowCard entry={project} />
                </li>
              ))
            }
          </ul>
        </section>

        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="font-semibold text-black dark:text-white">
              Latest posts
            </h2>
            <Link href="/blog"> See all posts </Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              blog.map((post) => (
                <li>
                  <ArrowCard entry={post} />
                </li>
              ))
            }
          </ul>
        </section>

        <section class="animate space-y-4">
          <h2 class="font-semibold text-black dark:text-white">
            Let's Connect
          </h2>
          <article class="prose dark:prose-invert">
            <p>
              If you'd like to discuss instructional design projects or learn more about my approach to learning solutions, I'd love to connect. Reach out through social media or send me an email.
            </p>
          </article>
          <ul class="not-prose flex flex-wrap gap-2">
            {
              SOCIALS.map((SOCIAL) => (
                <li class="flex gap-x-2 text-nowrap">
                  <Link
                    href={SOCIAL.HREF}
                    external
                    aria-label={`${SITE.TITLE} on ${SOCIAL.NAME}`}
                  >
                    {SOCIAL.NAME}
                  </Link>
                  {"/"}
                </li>
              ))
            }
            <li class="line-clamp-1">
              <Link
                href={`mailto:${SITE.EMAIL}`}
                aria-label={`Email ${SITE.TITLE}`}
              >
                {SITE.EMAIL}
              </Link>
            </li>
          </ul>
        </section>
      </div>
    </aside>
  </Container>
</Layout>